<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <title>My app</title>

</head>
<!-- Dette lager login form-->

<body>
    <div class="container" id="divLogin">

        <form class="form">
            <h1 class="form__title">Login</h1>
            <div class="form__input-group">
                <input type="text" class="form__input" id="loginEmail" autofocus placeholder="Email">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input type="password" class="form__input" id="loginPassword" autofocus placeholder="Password">
                <div class="form__input-error-message"></div>
            </div>
            <p class="form" id="continueButton">
                <a class="form__link" href="./" id="loginButton">
                    <button class="form__button" type="button">Submit</button>
                </a>
            </p>
            <p class="form__text">
                <a href="#" class="form__link">Forgot your password?</a>
            </p>
            <p class="form__text" id="continueButton">
                <a class="form__link" href="./" id="createAccountLink">Don't have an account? Create account</a>
            </p>
            <div id="loginMessage" style="display: none;">
                <span>"Brukernavn eller passord er feil"</span>
            </div>
        </form>
    </div>
    <!-- Dette lager create account form -->
    <div class="container" id="divCreateUser" style="display: block;">

        <form class="form">
            <h1 class="form__title">Create Account</h1>
            <div class="form__input-group">
                <input type="text" id="signupUsername" class="form__input" id="name" autofocus placeholder="Name">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input type="text" class="form__input" id="email" autofocus placeholder="Email Address">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input type="text" class="form__input" id="yearOfBirth" autofocus placeholder="Year of birth">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input type="text" class="form__input" id="height" autofocus placeholder="Height">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input type="text" class="form__input" id="weight" autofocus placeholder="Weight">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input type="password" class="form__input" id="pswHash" autofocus placeholder="Password">
                <div class="form__input-error-message"></div>
            </div>



            <!-- Denne lager continue knappen som linker select exercise -->
            <p class="form" id="createUserButton">
                <a class="form__link" href="./">
                    <button class="form__button" type="button">Submit</button>
                </a>
            </p>

            <p class="form__text">
                <a class="form__link" href="./" id="linkLogin">Already have an account? Sign in</a>
            </p>

        </form>
    </div>
    </div>


    <!-- <div class="home_button" >
        <a href="./">
            <button class="home_button" type="button" id="homeButton" style="display: block;">
                <img class="home_picture" src="/1228447-200.png" alt="">
            </button>

        </a>
    </div> -->
    <div class="return_button" id="returnButton" style="display: block;">
        <a href="./">
            <button class="return_button" type="button" id="returnButton" style="display: block;">
                <img class="home_picture" src="/return_arrow.png" alt="">
            </button>
        </a>
    </div>

    <div class="calender_button" id="calenderButton" style="display: block;">
        <a href="./">
            <button class="calender_button" type="button" id="calenderButton" style="display: block;">
                <img class="home_picture" src="/calendar_button.png" alt="">
            </button>
        </a>
    </div>

    <!-- Dette lager alle exercise knappene -->
    <div class="container" id="selecteYourExercise" style="display: block; ">
        <div class="form form_exercise" id="selectExerciseLegs">
            <a id="legsExercises" href="./">
                <button class="form__button-exercise" type="button" id="legsButton">Legs</button>
            </a>
        </div>
        <br>
        <div class="form form_exercise" id="selectExerciseCore">
            <a id="coreExercises" href="./">
                <button class="form__button-exercise" type="button" id="coreButton">Core</button>
            </a>
        </div>
        <br>
        <div class="form form_exercise" id="selectExercisePull">
            <a id="pullExercises" href="./">
                <button class="form__button-exercise" type="button" id="pullButton">Pull</button>
            </a>
        </div>
        <br>
        <div class="form form_exercise" id="selectExercisePush">
            <a id="pushExercises" href="./">
                <button class="form__button-exercise" type="button" id="pushButton">Push</button>
            </a>
        </div>
    </div>

    <div class="selectedExersices" style="display: block;">
        <!-- Liste øvelser for legs øvelser-->
        <div class="form form--hidden" id="selectedLegs" style="display: block;">
            <h1 class="form__title">Leg exercises</h1>
            <h3>Squats:</h3>
            <p>3 sets of 8-10 reps</p>

            <h3>Lunges:</h3>
            <p>3 sets of 10 reps per leg</p>

            <h3> Leg Press:</h3>
            <p>3 sets of 10-12 reps</p>

            <h3>Romanian Deadlifts:</h3>
            <p>3 sets of 8-10 reps</p>

            <h3>Calf Raises:</h3>
            <p>3 sets of 12-15 reps</p>

        </div>


        <!-- Liste over core øvelser -->
        <div class="form form--hidden" id="selectedCore" style="display: block;">
            <h1 class="form__title">Core exercises</h1>
            <h3>Plank:</h3>
            <p>3 sets, hold for 30-60 seconds each</p>

            <h3>Russian Twists:</h3>
            <p>3 sets of 15 reps per side</p>

            <h3>Leg Raises:</h3>
            <p>3 sets of 10-12 reps</p>

            <h3>Bicycle Crunches:</h3>
            <p>3 sets of 15 reps per side</p>

            <h3>Mountain Climbers:</h3>
            <p>3 sets of 20 reps per leg</p>

        </div>

        <!-- Liste for pull øvelser -->
        <div class="form form--hidden" id="selectedPull" style="display: block;">
            <h1 class="form__title">Pull exercises</h1>
            <h3>Deadlifts:</h3>
            <p>3 sets of 6-8 reps</p>

            <h3>Pull-Ups:</h3>
            <p>3 sets to failure (or assisted pull-ups if needed)</p>

            <h3>Bent Over Rows:</h3>
            <p>3 sets of 8-10 reps</p>

            <h3>Lat Pulldowns:</h3>
            <p>3 sets of 10-12 reps</p>

            <h3>Face pulls</h3>
            <p>3 sets of 12-15 reps</p>

        </div>

        <!-- Liste for Push øvelser -->
        <div class="form form--hidden" id="selectedPush" style="display: block;">
            <h1 class="form__title">Push exercises</h1>
            <h3>Bench Press:</h3>
            <p>3 sets of 8-10 reps</p>

            <h3>Overhead Press:</h3>
            <p>3 sets of 8-10 reps</p>

            <h3>Incline Dumbbell Press:</h3>
            <p>Incline Dumbbell Press:</p>

            <h3>Tricep Dips:</h3>
            <p>3 sets to failure</p>

            <h3>Push-Ups:</h3>
            <p>3 sets to failure</p>
        </div>
    </div>

    <!-- For å lage en log -->

    <table id="exerciseLogsTable" style="display: none;">
        <thead>
            <tr>
                <th>Date</th>
                <th>Exercise Name</th>
                <th>Sets</th>
                <th>Reps</th>
                <th>Weight</th>
                <th>Duration (min)</th>
            </tr>
        </thead>
        <tbody id="exerciseLogsBody">
            <!-- Exercise logs will be dynamically inserted here -->
        </tbody>
    </table>

    <script>

        /* gjemmer det som ikke er i bruk. Log inn og create user. */
        function toggleForms(formeName) {
            const loginForm = document.getElementById("divLogin");
            const createUserForm = document.getElementById("divCreateUser");
            const selecteYourExercise = document.getElementById("selecteYourExercise");
            const selectedLegs = document.getElementById("selectedLegs");
            const selectedCore = document.getElementById("selectedCore");
            const selectedPull = document.getElementById("selectedPull");
            const selectedPush = document.getElementById("selectedPush");
            const returnButton = document.getElementById("returnButton");
            const calenderButton = document.getElementById("calenderButton");

            switch (formeName) {
                case "login":
                    loginForm.style.display = "block";
                    createUserForm.style.display = "none";
                    selecteYourExercise.style.display = "none";
                    selectedLegs.style.display = "none";
                    selectedCore.style.display = "none";
                    selectedPull.style.display = "none";
                    selectedPush.style.display = "none";
                    returnButton.style.display = "none";
                    calenderButton.style.display = "none";
                    break;
                case "createUser":
                    loginForm.style.display = "none";
                    createUserForm.style.display = "block";
                    selecteYourExercise.style.display = "none";
                    selectedLegs.style.display = "none";
                    selectedCore.style.display = "none";
                    selectedPull.style.display = "none";
                    selectedPush.style.display = "none";
                    returnButton.style.display = "none";
                    calenderButton.style.display = "none";
                    break;
                case "exercise":
                    loginForm.style.display = "none";
                    createUserForm.style.display = "none";
                    selecteYourExercise.style.display = "block";
                    selectedLegs.style.display = "none";
                    selectedCore.style.display = "none";
                    selectedPull.style.display = "none";
                    selectedPush.style.display = "none";
                    returnButton.style.display = "none";
                    calenderButton.style.display = "block";
                    break;
                case "legs":
                    loginForm.style.display = "none";
                    createUserForm.style.display = "none";
                    selecteYourExercise.style.display = "none";
                    selectedLegs.style.display = "block";
                    selectedCore.style.display = "none";
                    selectedPull.style.display = "none";
                    selectedPush.style.display = "none";
                    returnButton.style.display = "block";
                    calenderButton.style.display = "block";
                    break;
                case "core":
                    loginForm.style.display = "none";
                    createUserForm.style.display = "none";
                    selecteYourExercise.style.display = "none";
                    selectedLegs.style.display = "none";
                    selectedCore.style.display = "block";
                    selectedPull.style.display = "none";
                    selectedPush.style.display = "none";
                    returnButton.style.display = "block";
                    calenderButton.style.display = "block";
                    break;
                case "pull":
                    loginForm.style.display = "none";
                    createUserForm.style.display = "none";
                    selecteYourExercise.style.display = "none";
                    selectedLegs.style.display = "none";
                    selectedCore.style.display = "none";
                    selectedPull.style.display = "block";
                    selectedPush.style.display = "none";
                    returnButton.style.display = "block";
                    calenderButton.style.display = "block";
                    break;
                case "push":
                    loginForm.style.display = "none";
                    createUserForm.style.display = "none";
                    selecteYourExercise.style.display = "none";
                    selectedLegs.style.display = "none";
                    selectedCore.style.display = "none";
                    selectedPull.style.display = "none";
                    selectedPush.style.display = "block";
                    returnButton.style.display = "block";
                    calenderButton.style.display = "block";
                    break;
            }

        }

        // Call toggleForms with showLogin set to true initially
        toggleForms("login");

        // Event listener for "Don't have an account? Create account" link
        const createAccountLink = document.getElementById("createAccountLink");
        createAccountLink.addEventListener("click", function (event) {
            event.preventDefault(); // Prevent the default link behavior
            toggleForms("createUser"); // Show create user form, hide login form
        });

        /* Client siden til createUser */
        /* legger til en eventlytter til createuserbutton som lytter etter klikk. */
        const createUserButton = document.getElementById("createUserButton");
        createUserButton.addEventListener("click", async function (e) {

            e.preventDefault();

            const name = document.getElementById("signupUsername").value;
            const email = document.getElementById("email").value;
            const pswHash = document.getElementById("pswHash").value;
            const yearOfBirth = document.getElementById("yearOfBirth").value;
            const weight = document.getElementById("weight").value;
            const height = document.getElementById("height").value;

            const user = { name, email, pswHash, yearOfBirth, weight, height };

            const respon = await postTo("/user/createUser", user);

            return false;
        });

        /* Client siden til login */
        /* legger til en eventlytter til loginButton lytter etter klikk */
        const loginButton = document.getElementById("loginButton");
        loginButton.addEventListener("click", async function (e) {

            e.preventDefault();

            const email = document.getElementById("loginEmail").value;
            const pswHash = document.getElementById("loginPassword").value;

            const user = { email, pswHash };
            loginMessage = document.getElementById("loginMessage");
            loginMessage.style.display = "none";

            const respon = await postTo("/user/login", user);
            if (respon) {
                toggleForms("exercise");
            } else {
                loginMessage = document.getElementById("loginMessage");
                loginMessage.style.display = "block";
            }

            return false;
        });

        /* Client siden til selectYourExercise */
        const selecteYourExercise = document.getElementById("selecteYourExercise");
        selecteYourExercise.addEventListener("click", async function (e) {
            e.preventDefault();

            const legs = document.getElementById("legsExercises").value;
            const core = document.getElementById("coreExercises").value;
            const pull = document.getElementById("pullExercises").value;
            const push = document.getElementById("pushExercises").value;

            const exerciseData = { legs, pull, push, core };

            // Send a POST request to the backend to save the exercise data using the postTo function
            try {
                const response = await postTo("/selectYourExercise", exerciseData);
                if (response) {
                    toggleForms("legs");
                } else {
                    console.error("Failed to select exercises");
                }
            } catch (error) {
                console.error("Error selecting exercises:", error);
            }

            return false; // Prevent default behavior of the link

            /*   const exercise = { legs, core, pull, push };
  
              const respon = await postTo("/exercise/selectYourExercise", exercise);
              if (respon) {
                  toggleForms("legs");
              }
  
              return false; */
        });

        document.addEventListener("DOMContentLoaded", function () {
            // Event listener for the return button
            const returnButton = document.getElementById("returnButton");
            returnButton.addEventListener("click", function (e) {
                e.preventDefault();
                toggleForms("exercise"); // Assuming "exercise" is the form you want to go back to
            });

            const calenderButton = document.getElementById("calenderButton");
            returnButton.addEventListener("click", function (e) {
                e.preventDefault();
                toggleForms("exercise"); // Assuming "exercise" is the form you want to go back to
            });

            // Event listeners for exercise buttons
            const legsButton = document.getElementById("legsButton");
            legsButton.addEventListener("click", function (e) {
                e.preventDefault();
                toggleForms("legs");
            });

            const coreButton = document.getElementById("coreButton");
            coreButton.addEventListener("click", function (e) {
                e.preventDefault();
                toggleForms("core");
            });

            const pullButton = document.getElementById("pullButton");
            pullButton.addEventListener("click", function (e) {
                e.preventDefault();
                toggleForms("pull");
            });

            const pushButton = document.getElementById("pushButton");
            pushButton.addEventListener("click", function (e) {
                e.preventDefault();
                toggleForms("push");
            });
        });

        async function postTo(url, data) {
            const header = {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            };


            const respon = await fetch(url, header);
            if (respon.status === 200) {
                return await respon.json();
            }
            return null;

        }

    </script>

</body>

</html>